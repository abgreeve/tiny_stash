{"version":3,"file":"helptabs.min.js","sources":["../src/helptabs.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny stash help tab navigation.\n *\n * @module      tiny_stash/helptabs\n * @copyright   2023 Adrian Greeve <adriangreeve.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Templates from 'core/templates';\nimport $ from 'jquery';\n\nexport const init = () => {\n    addTabListener();\n    addLinkListeners();\n};\n\nconst addTabListener = () => {\n    let helptabnode = document.getElementById('help-tab');\n    helptabnode.parentNode.addEventListener('click', () => {\n        Templates.render('tiny_stash/local/footers/help-footer', {}).then((html, js) => {\n            // Get footer node.\n            let modalfooter = document.querySelector('.modal-footer');\n            // Remove existing buttons.\n            removeChildren(modalfooter);\n            Templates.replaceNodeContents(modalfooter, html, js);\n            // Register footer listeners\n            registerFooterListeners();\n        });\n    });\n};\n\nconst addLinkListeners = () => {\n    let linknodes = document.querySelectorAll('.tiny-stash-help');\n    linknodes.forEach((linknode) => {\n        let slidenumber = linknode.dataset.tabIndex;\n        linknode.addEventListener('click', () => {\n            $('.carousel').carousel(parseInt(slidenumber));\n            $('.carousel').carousel('pause');\n            let helpbuttons = document.querySelectorAll('.stash-help');\n            helpbuttons.forEach((helpbutton) => {\n                helpbutton.classList.remove('invisible');\n            });\n        });\n    });\n};\n\nconst registerFooterListeners = () => {\n    let backnode = document.querySelector('button[data-action=\"back\"]');\n    backnode.addEventListener('click', (e) => {\n        $('.carousel').carousel(0);\n        $('.carousel').carousel('pause');\n        e.currentTarget.classList.add('invisible');\n    });\n};\n\n/**\n * Remove all the children from a node.\n *\n * @param {node} node - The node to remove the children from.\n */\nconst removeChildren = (node) => {\n    while (node.firstChild) {\n        node.removeChild(node.lastChild);\n    }\n};\n"],"names":["addTabListener","addLinkListeners","document","getElementById","parentNode","addEventListener","render","then","html","js","modalfooter","querySelector","removeChildren","replaceNodeContents","registerFooterListeners","querySelectorAll","forEach","linknode","slidenumber","dataset","tabIndex","carousel","parseInt","helpbutton","classList","remove","e","currentTarget","add","node","firstChild","removeChild","lastChild"],"mappings":";;;;;;;sLA0BoB,KAChBA,iBACAC,0BAGED,eAAiB,KACDE,SAASC,eAAe,YAC9BC,WAAWC,iBAAiB,SAAS,wBACnCC,OAAO,uCAAwC,IAAIC,MAAK,CAACC,KAAMC,UAEjEC,YAAcR,SAASS,cAAc,iBAEzCC,eAAeF,gCACLG,oBAAoBH,YAAaF,KAAMC,IAEjDK,iCAKNb,iBAAmB,KACLC,SAASa,iBAAiB,oBAChCC,SAASC,eACXC,YAAcD,SAASE,QAAQC,SACnCH,SAASZ,iBAAiB,SAAS,yBAC7B,aAAagB,SAASC,SAASJ,kCAC/B,aAAaG,SAAS,SACNnB,SAASa,iBAAiB,eAChCC,SAASO,aACjBA,WAAWC,UAAUC,OAAO,uBAMtCX,wBAA0B,KACbZ,SAASS,cAAc,8BAC7BN,iBAAiB,SAAUqB,wBAC9B,aAAaL,SAAS,uBACtB,aAAaA,SAAS,SACxBK,EAAEC,cAAcH,UAAUI,IAAI,iBAShChB,eAAkBiB,YACbA,KAAKC,YACRD,KAAKE,YAAYF,KAAKG"}