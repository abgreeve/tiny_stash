define("tiny_stash/drop-add",["exports","jquery","core/templates","editor_tiny/options"],(function(_exports,_jquery,_templates,_options){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * description
   *
   * @copyright  2023 Adrian Greeve <adriangreeve.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates);let ItemsData={},Editor={};_exports.init=(itemsData,editor)=>{ItemsData=itemsData,Editor=editor;let contextid=(0,_options.getContextId)(Editor);window.console.log(contextid);let areanode=document.querySelector(".tiny-stash-next-slide"),data={items:[]};for(let[index,item]of Object.entries(ItemsData))window.console.log(index),data.items.push({id:item.id,name:item.name});areanode&&_templates.default.render("tiny_stash/stash-drop-form",data).then(((html,js)=>{_templates.default.appendNodeContents(areanode,html,js)})),_templates.default.render("tiny_stash/local/footers/add-drop-footer",{}).then(((html,js)=>{let modalfooter=document.querySelector(".modal-footer");removeChildren(modalfooter),_templates.default.appendNodeContents(modalfooter,html,js),addFooterListeners()}))};const removeChildren=node=>{for(;node.firstChild;)node.removeChild(node.lastChild)},addFooterListeners=()=>{document.querySelector('button[data-action="back"]').addEventListener("click",(e=>{e.preventDefault(),(0,_jquery.default)(".carousel").carousel("prev"),(0,_jquery.default)(".carousel").carousel("pause");let areanode=document.querySelector(".tiny-stash-next-slide");removeChildren(areanode),_templates.default.render("tiny_stash/local/footers/main-footer",{}).then(((html,js)=>{let modalfooter=document.querySelector(".modal-footer");removeChildren(modalfooter),_templates.default.appendNodeContents(modalfooter,html,js)}))})),document.querySelector('button[data-action="add"]').addEventListener("click",(()=>{window.console.log("Save this drop!"),(()=>{let itemnode=document.querySelector(".stash-item"),itemvalue=itemnode.options[itemnode.selectedIndex].value,locationnode=document.querySelector(".location-name").value,suppliesnode=document.querySelector(".location-supplies").value,suppliesunlimitednode=document.querySelector("#supplyunlimited").checked,intervalnumber=document.querySelector(".intervalnumber").value,pickupintervalnode=document.querySelector(".pickupinterval"),data={itemid:itemvalue,location:locationnode,supplies:suppliesnode,unlimited:suppliesunlimitednode,intervalnumber:intervalnumber,pickupinterval:pickupintervalnode.options[pickupintervalnode.selectedIndex].value};window.console.log(data)})()}))}}));

//# sourceMappingURL=drop-add.min.js.map